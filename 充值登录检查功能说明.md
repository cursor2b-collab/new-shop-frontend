# âœ… å……å€¼ç™»å½•æ£€æŸ¥åŠŸèƒ½è¯´æ˜

## ğŸ“‹ åŠŸèƒ½æè¿°

åœ¨æ¥ç ç½‘ç«™çš„å……å€¼é¡µé¢ï¼Œå½“ç”¨æˆ·æœªç™»å½•çŠ¶æ€ä¸‹ç‚¹å‡»"ç«‹å³å……å€¼"æŒ‰é’®æ—¶ï¼š
- ğŸš« é˜»æ­¢å……å€¼æ“ä½œ
- ğŸ’¬ æ˜¾ç¤ºæç¤ºï¼š"è¯·ç™»å½•è´¦å·"
- ğŸ”„ è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•æ³¨å†Œé¡µé¢ï¼ˆ`/account`ï¼‰

## ğŸ”§ å®ç°ç»†èŠ‚

### ä¿®æ”¹çš„æ–‡ä»¶
`src/views/RechargePage.vue`

### ä¿®æ”¹çš„ä»£ç ï¼ˆç¬¬129-143è¡Œï¼‰

```javascript
// å¤„ç†å……å€¼
const handleRecharge = () => {
  // âœ… æ£€æŸ¥ç™»å½•çŠ¶æ€
  const savedAccountInfo = sessionStorage.getItem('accountInfo')
  const isLoggedIn = sessionStorage.getItem('isLoggedIn')
  
  if (!savedAccountInfo || isLoggedIn !== 'true') {
    alert('è¯·ç™»å½•è´¦å·')
    router.push('/account')
    return
  }
  
  console.log('å……å€¼é‡‘é¢:', rechargeAmount.value)
  // TODO: å®ç°å……å€¼é€»è¾‘
  alert(`å‡†å¤‡å……å€¼ ${rechargeAmount.value} USDT`)
}
```

### é€»è¾‘è¯´æ˜

1. **æ£€æŸ¥ç™»å½•çŠ¶æ€**ï¼š
   - ä» `sessionStorage` è¯»å– `accountInfo`ï¼ˆè´¦æˆ·ä¿¡æ¯ï¼‰
   - ä» `sessionStorage` è¯»å– `isLoggedIn`ï¼ˆç™»å½•æ ‡è®°ï¼‰

2. **æœªç™»å½•å¤„ç†**ï¼š
   - å¦‚æœè´¦æˆ·ä¿¡æ¯ä¸å­˜åœ¨ **æˆ–** ç™»å½•æ ‡è®°ä¸ä¸º `'true'`
   - å¼¹å‡ºæç¤ºæ¡†ï¼š"è¯·ç™»å½•è´¦å·"
   - ä½¿ç”¨ `router.push('/account')` è·³è½¬åˆ°ç™»å½•é¡µé¢
   - `return` é˜»æ­¢åç»­å……å€¼é€»è¾‘æ‰§è¡Œ

3. **å·²ç™»å½•å¤„ç†**ï¼š
   - ç»§ç»­æ‰§è¡Œå……å€¼é€»è¾‘

## ğŸ¯ ç”¨æˆ·ä½“éªŒæµç¨‹

### åœºæ™¯1ï¼šæœªç™»å½•ç”¨æˆ·
1. ç”¨æˆ·è®¿é—®å……å€¼é¡µé¢ï¼ˆ`/recharge`ï¼‰
2. é€‰æ‹©å……å€¼æ•°é‡
3. ç‚¹å‡»"ç«‹å³å……å€¼"æŒ‰é’®
4. âš ï¸ å¼¹å‡ºæç¤ºï¼š"è¯·ç™»å½•è´¦å·"
5. è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼ˆ`/account`ï¼‰
6. ç”¨æˆ·ç™»å½•åå¯ä»¥å†æ¬¡è®¿é—®å……å€¼é¡µé¢

### åœºæ™¯2ï¼šå·²ç™»å½•ç”¨æˆ·
1. ç”¨æˆ·è®¿é—®å……å€¼é¡µé¢ï¼ˆ`/recharge`ï¼‰
2. é€‰æ‹©å……å€¼æ•°é‡
3. ç‚¹å‡»"ç«‹å³å……å€¼"æŒ‰é’®
4. âœ… ç»§ç»­å……å€¼æµç¨‹

## ğŸ” ç™»å½•çŠ¶æ€æ£€æŸ¥

### ä½¿ç”¨çš„Session Storageé”®
- `accountInfo`ï¼šå­˜å‚¨ç”¨æˆ·è´¦æˆ·ä¿¡æ¯
- `isLoggedIn`ï¼šå­˜å‚¨ç™»å½•çŠ¶æ€æ ‡è®°ï¼ˆ`'true'` / `'false'`ï¼‰

### ç¤ºä¾‹ï¼šè®¾ç½®ç™»å½•çŠ¶æ€
```javascript
// ç™»å½•æˆåŠŸåè®¾ç½®
sessionStorage.setItem('accountInfo', JSON.stringify(accountInfo))
sessionStorage.setItem('isLoggedIn', 'true')
```

### ç¤ºä¾‹ï¼šæ¸…é™¤ç™»å½•çŠ¶æ€
```javascript
// é€€å‡ºç™»å½•æ—¶æ¸…é™¤
sessionStorage.removeItem('accountInfo')
sessionStorage.removeItem('isLoggedIn')
// æˆ–
sessionStorage.clear()
```

## ğŸ“„ ç›¸å…³é¡µé¢

### å……å€¼é¡µé¢
- **è·¯å¾„**ï¼š`/recharge`
- **ç»„ä»¶**ï¼š`src/views/RechargePage.vue`
- **åŠŸèƒ½**ï¼šä½™é¢å……å€¼

### ç™»å½•æ³¨å†Œé¡µé¢
- **è·¯å¾„**ï¼š`/account`
- **ç»„ä»¶**ï¼š`src/views/AccountPage.vue`
- **åŠŸèƒ½**ï¼šç”¨æˆ·ç™»å½•ã€æ³¨å†Œ

## ğŸ”„ å…¶ä»–éœ€è¦ç™»å½•çš„åŠŸèƒ½

é™¤äº†å……å€¼åŠŸèƒ½ï¼Œä»¥ä¸‹åŠŸèƒ½ä¹Ÿå·²å®ç°ç™»å½•æ£€æŸ¥ï¼š

### 1. APIæ¥å£è®¿é—®
**æ–‡ä»¶**ï¼š`src/views/HomePage.vue` å’Œ `src/views/RechargePage.vue`

```javascript
const handleApiClick = () => {
  const savedAccountInfo = sessionStorage.getItem('accountInfo')
  if (!savedAccountInfo) {
    alert('è¯·å…ˆç™»å½•åå†è®¿é—®APIæ¥å£')
    router.push('/account')
  } else {
    router.push('/api')
  }
}
```

### 2. ç«‹å³è´­ä¹°
**æ–‡ä»¶**ï¼š`src/views/HomePage.vue` ç¬¬444-453è¡Œ

```javascript
const handleSubmit = async () => {
  // æ£€æŸ¥ç™»å½•çŠ¶æ€
  const savedAccountInfo = sessionStorage.getItem('accountInfo')
  const isLoggedIn = sessionStorage.getItem('isLoggedIn')
  
  if (!savedAccountInfo || isLoggedIn !== 'true') {
    alert('è¯·å…ˆç™»å½•åå†è´­ä¹°')
    router.push('/account')
    return
  }
  // ... è´­ä¹°é€»è¾‘
}
```

### 3. è·¯ç”±å®ˆå«
**æ–‡ä»¶**ï¼š`src/router/index.js` ç¬¬59-71è¡Œ

APIæ¥å£é¡µé¢ä½¿ç”¨è·¯ç”±å®ˆå«ä¿æŠ¤ï¼š

```javascript
router.beforeEach((to, from, next) => {
  if (to.meta.requiresAuth) {
    const savedAccountInfo = sessionStorage.getItem('accountInfo')
    if (!savedAccountInfo) {
      alert('è¯·å…ˆç™»å½•åå†è®¿é—®æ­¤é¡µé¢')
      next('/account')
    } else {
      next()
    }
  } else {
    next()
  }
})
```

## ğŸ¨ UIç»„ä»¶

### å……å€¼æŒ‰é’®
```vue
<button 
  type="button" 
  class="el-button el-button--success el-button--large" 
  style="width: 100%" 
  @click="handleRecharge"
>
  <span class="el-button__text">ç«‹å³å……å€¼</span>
</button>
```

### æç¤ºä¿¡æ¯æ¡†ï¼ˆAlertï¼‰
```javascript
alert('è¯·ç™»å½•è´¦å·')
```

å¯ä»¥è€ƒè™‘ä½¿ç”¨æ›´ç¾è§‚çš„UIç»„ä»¶ï¼š
- Element Plus Message
- Naive UI Message
- è‡ªå®šä¹‰Toastç»„ä»¶

### ç¤ºä¾‹ï¼šä½¿ç”¨Element Plus Message
```javascript
import { ElMessage } from 'element-plus'

const handleRecharge = () => {
  const savedAccountInfo = sessionStorage.getItem('accountInfo')
  const isLoggedIn = sessionStorage.getItem('isLoggedIn')
  
  if (!savedAccountInfo || isLoggedIn !== 'true') {
    ElMessage.warning('è¯·ç™»å½•è´¦å·')
    router.push('/account')
    return
  }
  // ...
}
```

## ğŸš€ æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1ï¼šæœªç™»å½•çŠ¶æ€
1. æ¸…é™¤æµè§ˆå™¨Session Storage
   ```javascript
   sessionStorage.clear()
   ```
2. è®¿é—®å……å€¼é¡µé¢ï¼š`http://localhost:5173/recharge`
3. é€‰æ‹©å……å€¼æ•°é‡ï¼ˆä¾‹å¦‚ï¼š10 USDTï¼‰
4. ç‚¹å‡»"ç«‹å³å……å€¼"æŒ‰é’®
5. âœ… åº”è¯¥å¼¹å‡ºæç¤ºï¼š"è¯·ç™»å½•è´¦å·"
6. âœ… åº”è¯¥è‡ªåŠ¨è·³è½¬åˆ° `/account` é¡µé¢

### æµ‹è¯•2ï¼šå·²ç™»å½•çŠ¶æ€
1. å…ˆåœ¨ç™»å½•é¡µé¢ç™»å½•
   ```javascript
   sessionStorage.setItem('isLoggedIn', 'true')
   sessionStorage.setItem('accountInfo', JSON.stringify({ username: 'test' }))
   ```
2. è®¿é—®å……å€¼é¡µé¢ï¼š`http://localhost:5173/recharge`
3. é€‰æ‹©å……å€¼æ•°é‡
4. ç‚¹å‡»"ç«‹å³å……å€¼"æŒ‰é’®
5. âœ… ä¸åº”è¯¥è·³è½¬ï¼Œç»§ç»­å……å€¼æµç¨‹

### æµ‹è¯•3ï¼šè·¨é¡µé¢çŠ¶æ€ä¿æŒ
1. ç™»å½•åè®¿é—®é¦–é¡µ
2. ç‚¹å‡»å¯¼èˆªæ çš„"å……å€¼"æ ‡ç­¾
3. ç‚¹å‡»"ç«‹å³å……å€¼"
4. âœ… åº”è¯¥ç»§ç»­å……å€¼æµç¨‹ï¼ˆä¸è·³è½¬ç™»å½•é¡µï¼‰

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…

å……å€¼é¡µé¢å·²é€‚é…ç§»åŠ¨ç«¯ï¼Œç™»å½•æ£€æŸ¥åŠŸèƒ½åœ¨ç§»åŠ¨ç«¯åŒæ ·æœ‰æ•ˆï¼š
- å“åº”å¼å¸ƒå±€
- è§¦æ‘¸å‹å¥½çš„æŒ‰é’®
- ç§»åŠ¨ç«¯å¼¹çª—é€‚é…

## ğŸ”§ æ‰©å±•å»ºè®®

### 1. æ·»åŠ é¡µé¢çº§ç™»å½•æ£€æŸ¥
åœ¨å……å€¼é¡µé¢åŠ è½½æ—¶å°±æ£€æŸ¥ç™»å½•çŠ¶æ€ï¼š

```javascript
import { onMounted } from 'vue'

onMounted(() => {
  // æ£€æŸ¥ç™»å½•çŠ¶æ€
  const savedAccountInfo = sessionStorage.getItem('accountInfo')
  const isLoggedIn = sessionStorage.getItem('isLoggedIn')
  
  if (!savedAccountInfo || isLoggedIn !== 'true') {
    ElMessage.warning('è¯·å…ˆç™»å½•åå†ä½¿ç”¨å……å€¼åŠŸèƒ½')
    setTimeout(() => {
      router.push('/account')
    }, 2000)
  }
})
```

### 2. ä½¿ç”¨è·¯ç”±å®ˆå«ä¿æŠ¤å……å€¼é¡µé¢
åœ¨è·¯ç”±é…ç½®ä¸­æ·»åŠ ï¼š

```javascript
{
  path: '/recharge',
  name: 'Recharge',
  component: RechargePage,
  meta: { requiresAuth: true } // æ·»åŠ éœ€è¦ç™»å½•çš„æ ‡è®°
}
```

### 3. æ·»åŠ æ›´å‹å¥½çš„æç¤ºUI
ä½¿ç”¨Messageç»„ä»¶æ›¿ä»£alertï¼š

```javascript
import { ElMessage } from 'element-plus'

ElMessage({
  message: 'è¯·ç™»å½•è´¦å·',
  type: 'warning',
  duration: 2000,
  showClose: true
})
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **Session Storageç‰¹æ€§**ï¼š
   - ä»…åœ¨å½“å‰æ ‡ç­¾é¡µæœ‰æ•ˆ
   - å…³é—­æ ‡ç­¾é¡µåæ•°æ®æ¸…é™¤
   - ä¸åŒæ ‡ç­¾é¡µä¸å…±äº«æ•°æ®

2. **å®‰å…¨æ€§**ï¼š
   - æ•æ„Ÿä¿¡æ¯ä¸è¦å­˜å‚¨åœ¨ Session Storage
   - è€ƒè™‘ä½¿ç”¨åŠ å¯†å­˜å‚¨
   - å®šæœŸéªŒè¯ç™»å½•çŠ¶æ€ï¼ˆTokenè¿‡æœŸæ£€æŸ¥ï¼‰

3. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - æç¤ºä¿¡æ¯æ¸…æ™°æ˜ç¡®
   - è·³è½¬é€»è¾‘æµç•…
   - ç™»å½•åè‡ªåŠ¨è¿”å›åŸé¡µé¢ï¼ˆå¯é€‰ï¼‰

## âœ… å®ŒæˆçŠ¶æ€

- âœ… å……å€¼æŒ‰é’®ç‚¹å‡»æ—¶æ£€æŸ¥ç™»å½•çŠ¶æ€
- âœ… æœªç™»å½•æ—¶æ˜¾ç¤ºæç¤º"è¯·ç™»å½•è´¦å·"
- âœ… è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
- âœ… å·²ç™»å½•æ—¶æ­£å¸¸æ‰§è¡Œå……å€¼æµç¨‹
- âœ… ä¸å…¶ä»–é¡µé¢ç™»å½•æ£€æŸ¥é€»è¾‘ä¿æŒä¸€è‡´

---

**æ›´æ–°æ—¶é—´**ï¼š2024-01-XX  
**ç‰ˆæœ¬**ï¼šv1.0  
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ



















